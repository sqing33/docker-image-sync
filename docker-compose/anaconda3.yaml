services:
  miniconda3:
    image: continuumio/miniconda3
    container_name: miniconda3
    ports:
      - "18888:8888"
    working_dir: /app
    volumes:
      - /vol2/1000/python:/app
    stdin_open: true
    tty: true
    
    # 安装 Jupyter
    command: >
      /bin/bash -c "
      echo '开始 Jupyter 环境设置...' &&
      /opt/conda/bin/conda install jupyter -y --quiet &&
      mkdir -p /opt/notebooks &&
      echo '启动 Jupyter Notebook 服务器...' &&
      /opt/conda/bin/jupyter notebook --notebook-dir=/app --ip='0.0.0.0' --port=8888 --no-browser --allow-root --NotebookApp.token='' --NotebookApp.password=''
      "
